/* GLOBAL */
:root { --bg-dark: #121212; --panel-bg: #1e1e1e; --dem-blue: #00AEF3; --rep-red: #E81B23; --gold: #ffd700; --text-white: #fff; }
body { margin: 0; font-family: 'Roboto', sans-serif; background: var(--bg-dark); color: var(--text-white); overflow: hidden; height: 100vh; }
.hidden { display: none !important; }
.blue { color: var(--dem-blue); } .red { color: var(--rep-red); }

/* HOMESCREEN (Clean Dark) */
#intro-screen { display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; height: 100vh; background: #111; }
.breaking-banner { background: var(--rep-red); color: white; padding: 5px 15px; font-weight: 900; letter-spacing: 2px; margin-bottom: 20px; text-transform: uppercase; }
.main-title { font-family: 'Merriweather', serif; font-size: 5rem; margin: 0 0 40px 0; text-shadow: 0 4px 10px rgba(0,0,0,0.5); }
.start-btn { padding: 15px 50px; font-size: 1.2rem; background: var(--dem-blue); color: white; border: 2px solid white; font-weight: bold; cursor: pointer; text-transform: uppercase; transition: 0.2s; }
.start-btn:hover { background: white; color: var(--dem-blue); }

/* LAYOUT */
.screen { display: none; height: 100vh; width: 100vw; flex-direction: column; }
.screen.active { display: flex; animation: fadeEnt 0.5s ease; }
@keyframes fadeEnt { from { opacity: 0; } to { opacity: 1; } }

/* HUD */
.hud-header { height: 80px; background: #1a1a1a; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; border-bottom: 1px solid #333; z-index: 100; }
.candidate-badge { display: flex; align-items: center; gap: 15px; }
#hud-img { width: 55px; height: 55px; border-radius: 50%; border: 2px solid white; object-fit: cover; }
.hud-text-col { display: flex; flex-direction: column; }
.cand-name { font-weight: 900; font-size: 1.2rem; text-transform: uppercase; }
.cand-party { font-size: 0.75rem; color: #aaa; letter-spacing: 1px; font-weight: bold; }
.hud-center { text-align: center; }
.ev-display { display: flex; justify-content: space-between; font-weight: 900; font-size: 1.3rem; margin-bottom: 5px; }
.progress-bar-bg { height: 12px; background: #333; width: 450px; border: 1px solid #555; }
.progress-bar-fill { height: 100%; transition: background 0.5s; }
.hud-right { display: flex; gap: 20px; align-items: center; }
.stat-group label { font-size: 0.65rem; color: #888; display: block; letter-spacing: 1px; }
.money { color: #4ade80; font-weight: bold; font-size: 1.1rem; }
.energy-container { display: flex; gap: 3px; }
.energy-pip { width: 8px; height: 16px; background: #333; border: 1px solid #555; transform: skewX(-15deg); }
.energy-pip.active { background: var(--gold); box-shadow: 0 0 8px var(--gold); border-color: #fff; }

/* MAP (STRICT WHITE BORDERS) */
.game-area { display: flex; height: calc(100vh - 80px); position: relative; overflow: hidden; }
#map-container { flex: 1; background: var(--bg-dark); display: flex; align-items: center; justify-content: center; position: relative; padding: 20px; }
svg { width: 100%; height: 100%; max-height: 85vh; filter: drop-shadow(0 0 10px rgba(0,0,0,0.5)); }
path, rect { transition: fill 0.2s; cursor: pointer; stroke: #fff !important; stroke-width: 0.5px !important; }
#us-map-svg path:hover { stroke: var(--gold) !important; stroke-width: 2px !important; z-index: 100; filter: brightness(1.2); }
#county-map-container { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
#county-map-container path { stroke: #fff !important; stroke-width: 0.2px !important; } 
#county-map-container path:hover { stroke: var(--gold) !important; stroke-width: 1px !important; z-index: 1000; filter: brightness(1.3); }

/* SIDEBAR */
#sidebar { width: 380px; background: var(--panel-bg); border-left: 1px solid #333; display: flex; flex-direction: column; box-shadow: -5px 0 15px rgba(0,0,0,0.3); z-index: 200; }
#state-panel, #empty-msg { padding: 20px; flex: 1; overflow-y: auto; }
#empty-msg { display: flex; flex-direction: column; align-items: center; justify-content: center; color: #666; text-align: center; }
.empty-icon { font-size: 3rem; margin-bottom: 15px; opacity: 0.5; }
.state-header-box h2 { margin: 0; font-family: 'Merriweather', serif; font-size: 1.1rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.poll-vis { background: #252525; padding: 15px; border-radius: 4px; border: 1px solid #333; margin-bottom: 20px; }
.poll-bar-wrap { display: flex; height: 20px; background: #333; margin-bottom: 8px; border: 1px solid #555; overflow: hidden; }
.poll-bar-wrap div { height: 100%; transition: width 0.4s ease-out; }

/* ACTION BUTTONS */
.action-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
.act-btn { padding: 15px; border: 1px solid #444; background: #2a2a2a; color: white; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 5px; transition: 0.2s; border-radius: 4px; }
.act-btn:hover { background: #333; border-color: #666; }

.next-turn-btn { padding: 10px 20px; background: #198754; color: white; border: 1px solid #146c43; font-weight: bold; cursor: pointer; text-transform: uppercase; border-radius: 4px; }
.next-turn-btn:hover { background: #157347; }
.undo-btn { padding: 5px 15px; background: #444; color: #ccc; border: 1px solid #555; font-size: 0.8rem; cursor: pointer; border-radius: 4px; margin-right: 10px; }
.undo-btn:hover { background: #555; color: white; }

/* TOGGLE */
.toggle-wrapper { display: flex; align-items: center; justify-content: space-between; background: #2a2a2a; padding: 10px; border: 1px solid #444; border-radius: 4px; }
.switch { position: relative; display: inline-block; width: 50px; height: 24px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
.slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
input:checked + .slider { background-color: var(--dem-blue); }
input:checked + .slider:before { transform: translateX(26px); }

/* TOOLTIPS & CARDS */
#map-tooltip { position: fixed; background: rgba(0,0,0,0.95); padding: 12px; border: 1px solid #555; pointer-events: none; z-index: 9999; min-width: 180px; text-align: center; }
.tooltip-title { font-family: 'Merriweather', serif; font-weight: 700; font-size: 1.1rem; display: block; margin-bottom: 5px; color: #fff; text-transform: uppercase; }
.tooltip-divider { border-bottom: 1px solid #555; margin: 5px 0; }
.tooltip-leader { font-weight: 900; font-size: 1.2rem; display: block; }
.cards-row { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 30px; }
.card { background: #2a2a2a; border: 1px solid #444; width: 220px; cursor: pointer; position: relative; border-radius: 4px; overflow: hidden; }
.card:hover { border-color: var(--dem-blue); transform: translateY(-5px); }
.portrait img { width: 100%; height: 180px; object-fit: cover; object-position: top; }
.card-info { padding: 15px; }
